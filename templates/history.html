{% extends 'template.html' %} {% block content %}

<ul class="flex flex-wrap border-b border-gray-200">
  <li class="mr-2">
    <a
        href="{{url_for('index')}}"
      aria-current="page"
      class="inline-block text-gray-500 hover:text-gray-600 hover:bg-gray-50 rounded-t-lg py-4 px-4 text-sm font-medium text-center active"
      ><i class="fa fa-headphones-simple text-xl"></i> Speech</a
    >
  </li>
  <li class="mr-2">
    <a
        href="{{url_for('history')}}"
      class="inline-block bg-gray-100 text-blue-600 rounded-t-lg py-4 px-4 text-sm font-medium text-center"
      ><i class="fa fa-clock-rotate-left text-xl text-green-500"></i> History</a
    >
  </li>
  <li class="mr-2">
    <a
      href="#"
      class="inline-block text-gray-500 hover:text-gray-600 hover:bg-gray-50 rounded-t-lg py-4 px-4 text-sm font-medium text-center"
      ><i class="fa fa-gear text-xl"></i> Setting</a
    >
  </li>
</ul>
{% if history %}
<table class="table-auto border-collapse border border-slate-500">
  <thead>
    <tr>
      <th class="border border-slate-600">Message</th>
      <th class="border border-slate-600">Audio</th>
      <th class="border border-slate-600">Time</th>
    </tr>
  </thead>
  <tbody>
    {% for item in history %}
      <tr>
        <td class="border border-slate-700">{{ item['message'][:50] + '...' * (item['message']|length > 50) }}</td>
        <td class="border border-slate-700">
<audio controls>
  <source src="audio/{{ item['id'] }}" type="audio/wav">
  Your brower doesn't support audio.
</audio>
        </td>
        <td class="border border-slate-700">{{ item['time'] }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<form method="POST" action="{{ url_for('history') }}">
  <button
    type="submit"
    class="inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-red-700 rounded-lg focus:ring-4 focus:ring-red-200 dark:focus:ring-red-900 hover:bg-red-800"
  >
    Clear History
  </button>
</form>
{% else %}
<div class="text-gray-700" role="alert">
  No history yet.
</div>
{% endif %}


{% endblock %}
